<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Products</title>
<style>
body {
    margin: 20px;
    font-family: Arial, sans-serif;
    color: #333;
    background: #f9f9f9;
}

h1 {
    color: #ff9900;
    margin-bottom: 20px;
    text-align: center;
    font-size: 2em;
    font-weight: bold;
}

.container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); 
    gap: 20px;
}

.card {
    background: #ffffff;
    border-radius: 12px;
    padding: 20px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    box-shadow: 0 2px 5px #0003;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 10px #0005;
}

.card img {
    width: 160px;
    height: 160px;
    object-fit: cover;
    margin-bottom: 15px;
    border-radius: 8px;
    border: 3px solid #ff9900;
}

.card h2 {
    font-size: 1.1em;
    margin-bottom: 10px;
    color: #ff9900;
}

.card p {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 10px;
}

.card .price {
    color: #ff9900;
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 1.1em;
}

.card .rating {
    color: #ff9900;
    margin-bottom: 10px;
    font-size: 0.9em;
}

</style>
</head>
<body>
<h1>Product Listing</h1>

<div class="container" id="productContainer">
    <!-- products will be injected here -->
</div>

<script>
    async function fetchProducts(){
        try {
            const res = await fetch('http://localhost:3000/external/products');
            const products = await res.json();

            const container = document.getElementById('productContainer');
            container.innerHTML = products?.map(product => `
                <div class="card">
                    <img src="${product.image}" alt="${product.title}">
                    <h2>${product.title}</h2>
                    <div class="price">$${product.price.toFixed(2)}</div>
                    <div class="rating">Rating: ${product.rating?.rate} (${product.rating?.count} reviews)</div>
                    <p>${product.description.slice(0, 100)}...</p>
                </div>
            `).join('');
        } catch (err) {
            console.error(err);
        }
    }

    fetchProducts();
</script>

</body>
</html>
